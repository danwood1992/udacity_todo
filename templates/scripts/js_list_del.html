<script>
    async function deleteList(listid) {
        try {
            const response = await fetch('/lists/delete', {
                method: 'POST',
                body: JSON.stringify({ 'listid': listid }),
                headers: { 'Content-Type': 'application/json' }
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return await response.json();

            const jsonResponse = await response.json();

            return jsonResponse;
        } catch (error) {
            console.error('Failed to Delete list:', error);            
        }
    }

    function removeSidebarList(listname) {
        sidebarlist = document.getElementById(listname)
        console.log("removing list");
        console.log(sidebarlist);
    
    }

    document.getElementById("delete-list-form").onsubmit = async function(e) {
        e.preventDefault();
        console.log("delete js script triggered")
        console.log(e)
        const listid = e.target.listid.value;
        const listname = e.target.listid.value;
        const success = await deleteList(listid)
        if (success) {
            console.log("deleted" + listname);
            removeSidebarList(listname);

        }
        
    };
    
</script>


